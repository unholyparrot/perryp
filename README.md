# PerryP — Perry the Platypus  

Поиск характерных пептидов по таксономии 

## Quick start 
### Установка 

1. Клонируем репозиторий 
2. Переходим в директорию проекта `cd perryp`
3. Создаем виртуальное окружение `python3 -m venv venv`
4. Активируем виртуальное окружение `source venv/bin/activate`
5. Устанавливаем зависимости `pip install -r requirements.txt`
6. Проверяем работу `python go_go_perry.py --version`

### Интерпретация результатов 

Результаты пишет в таблицы, группирующиеся по таксономическому уровню. 
Для всех таблиц используется следующий формат (внимание, записано для примера и абсолютно наугад, 
не представляет информационной ценности): 

| taxonId | scientificName  | C100     | C80       | C50                          | U100     | U80 |
|---------|-----------------|----------|-----------|------------------------------|----------|-----|
| 76803   | Arteriviridae   | afewnisr |  afewnisr |  afewnisr,agfnpk,alnavfycier | afewnisr |     |

Здесь столбцы: 
* taxonId — уникальный идентификатор из Uniprot Taxonomy;
* scientificName — соответствует имени этого таксона в UniProt Taxonomy;
* C100 — пептиды, представленные у всех детей этого таксона;
* C80 — пептиды, представленные у 80% детей этого таксона. Данный параметр может быть изменен в конфигурации, 
  что повлечет изменение в наименовании столбца;
* C50 (оно же C60, C70 и т.д.) — пептиды, представленные у 50% (и иные цифры соответственно) детей этого таксона. 
  Этот параметр различный для разных уровней древа; 
* U100 — пептиды из C100, являющиеся уникальными для детей этого таксона, по сравнению со всеми иными 
  детьми данного таксономического уровня;
* U80 — пептиды из C80, являющиеся уникальными для детей этого таксона, по сравнению со всеми иными детьми
  данного таксономического уровня. 

Если какое-то поле пустое, значит пептидов соответствующей категории не нашлось. 

## Warnings 

На текущем этапе НЕ реализовано какое-либо скачивание последовательностей из UniProt, кроме JSON формата. 
В случае, если он дважды выдаст ошибку при попытке запросить JSON, не следует доверять громки заявлениям о
скачивании `*.fasta.gz` или запросам пагинацией, это пока не реализовано и стоят посредственные заглушки. 

## Некоторые замечания 

1. Лучше запускать для следующих таксономических уровней: *genus*, *family*, *order*; для *species* скорее всего 
   работать вообще не будет, а для высших уровней может не пройти запрос последовательностей или таксономии. 
2. При указании параметра `-out | --out_pattern` подразумевается указание буквально префикса для файлов.
   
   Рекомендуется указывать следующим образом: `/mnt/my_file_system/data/test_run/INI`, тогда выходные файлы будут
   записаны как `/mnt/my_file_system/data/test_run/INI_records.log` и так далее. 
